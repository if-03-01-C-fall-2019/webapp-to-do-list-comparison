<!doctype html>
<html lang="en">
<%- include('../partials/head', {title: "Beddit - " + info.name}) %>

<body>
    <%- include('../partials/nav', {user: locals.user, karma}) %>
    <span id="auth"><%= isAuth %></span>




    <div class="main">
        <div class="container" style="padding-top: 60px; max-width: 850px;">
            <h1 class="mb-4"><%= info.name %></h1>
            <p><%=  info.description %></p>
            <br>
            <%- include('../partials/sidebar_subreddit_actions', {name: info.name, state: state}) %>

            <% if (posts != undefined) { 
                posts.forEach((post) => { %>
            <article class="post" data-ref="<%= post._id %>">
                <div class="arrows">
                    <div class="upvote-post auth-req"><svg transform="translate(-1,-9)" width="1em" height="1em"
                            viewBox="0 0 16 16" class="bi bi-caret-up-fill" fill="currentColor"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.247 4.86l-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z" />
                        </svg></i></div>
                    <span class="post-votes" style="position: relative; left: 3px; top: -5px;"
                        data-ref="<%= post._id %>"><%= post.votes %></span>
                    <div class="downvote-post auth-req"><svg style="position: relative; left: 3px; top: -5px;"
                            transform="translate(-4,0)" width="1em" height="1em" viewBox="0 0 16 16"
                            class="bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z" />
                        </svg></i></div>
                </div>
                
                <div class="info">
                    <header>
                        <a><%= post.title %></a>
                        <small><span class="post-user"><a>by <%= post.username %></a></span></small>
                    </header>
                    <div>
                        <%= post.body %>
                    </div>
                    <ul class="post-options">
                        <li><a href="javascript:void(0)" class="save-post auth-req">save</a></li>
                        <% if(post.username == locals.user) { %>
                        <li><a href="javascript:void(0)" class="delete-post auth-req">delete</a></li>
                        <% } %>
                    </ul>
                </div>
            </article>
            <% });%>
            <% } else { %>

            <div class="form-row ">
                <div class="col-2">
                    <svg width="5em" transform="translate(-11,0)" height="5em" viewBox="0 0 16 16" class="bi bi-arrow-90deg-up" fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M2.646 6.854a.5.5 0 0 0 .708 0L6 4.207l2.646 2.647a.5.5 0 1 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 0 .708z" />
                        <path fill-rule="evenodd"
                            d="M6 3.5a.5.5 0 0 0-.5.5v6.5A2.5 2.5 0 0 0 8 13h5.5a.5.5 0 0 0 0-1H8a1.5 1.5 0 0 1-1.5-1.5V4a.5.5 0 0 0-.5-.5z" />
                    </svg>
                </div>
                <div class="col-10">
                    <h3 class="text  p-2  font-weight-normal" style="margin-top: 37px;">Create a new vote
                        elememt</h3>

                </div>

                <% } %>

            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/autosize@4.0.2/dist/autosize.min.js"></script>
        <script src="/js/load.js"></script>


        <script src="/js/index.js"></script>
        <script src="/js/post.js"></script>
        <script src="/js/subreddit.js"></script>
        <script src="/js/sort.js"></script>

</body>

</html>